(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{429:function(t,e,n){"use strict";n.r(e);n(85),n(155),n(23),n(50),n(46);var r=n(10),c=n(13),o=n(21),l=n(24),f=n(22),v=n(11),h=n(6),d=n(66),m=n(117),y=n.n(m);function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(v.a)(t);if(e){var c=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var _=function(t,e,n,desc){var r,c=arguments.length,o=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(o=(c<3?r(o):c>3?r(e,n,o):r(e,n))||o);return c>3&&o&&Object.defineProperty(e,n,o),o};function w(html){var div=document.createElement("div");return div.innerHTML=html,div.textContent||div.textContent||""}var C=function(t){Object(l.a)(d,t);var e,n,f,v,h=I(d);function d(){var t;return Object(c.a)(this,d),(t=h.apply(this,arguments)).baseUrl="https://nakamura196.github.io/i3",t.manifestDownloaded=!1,t.curationUriGenerated=!1,t.result=!1,t.curationUri="",t.canvasProgress="",t.manifest="",t.generating=!1,t.viewers=[{url:"http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?curation=",icon:t.baseUrl+"/img/icons/icp-logo.svg",label:"IIIF Curation Viewerで閲覧する"},{url:"http://codh.rois.ac.jp/software/iiif-curation-player/demo/?curation=",icon:t.baseUrl+"/img/icons/icp-logo.svg",label:"IIIF Curation Playerで閲覧する"},{url:"https://self-museum.cultural.jp/?collection=",icon:t.baseUrl+"/img/icons/favicon.ico",label:"セルフミュージアムで閲覧する"},{url:"https://nakamura196.github.io/icc2/?u=",icon:t.baseUrl+"/img/icons/sn.png",label:"IIIF Multi Viewerで閲覧する"},{url:t.baseUrl+"/map/?curation=",icon:t.baseUrl+"/img/icons/sn.png",label:"IIIF Curation Map Searchで閲覧する"}],t}return Object(o.a)(d,[{key:"head",value:function(){return{titleTemplate:null,title:this.$t("IIIF Converter")}}},{key:"mounted",value:(v=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r,c,o,l,f,v,i,canvas,h,d,m,y,I,_,C,text,x,k,j,R,O,$;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$route.query.u){t.next=3;break}return t.abrupt("return");case 3:return n=e+"",this.manifest=n,this.manifestDownloaded=!0,t.next=8,this.getData(n);case 8:if(r=t.sent){t.next=12;break}return this.manifestDownloaded=!1,t.abrupt("return");case 12:return c=r.sequences[0].canvases,o=1,this.curationUriGenerated=!0,t.next=17,this.create({});case 17:if(t.t0=t.sent,t.t0){t.next=20;break}t.t0="";case 20:l=t.t0,this.curationUri=l,v={"@context":["http://iiif.io/api/presentation/2/context.json","http://codh.rois.ac.jp/iiif/curation/1/context.json"],"@type":"cr:Curation","@id":l,label:"Automatic curation by IIIF Converter",viewingHint:"grid",selections:[{"@id":l+"/range1","@type":"sc:Range",label:"Automatic curation by IIIF Converter",members:f=[],within:{"@id":n,"@type":"sc:Manifest",label:r.label}}]},i=0;case 25:if(!(i<c.length)){t.next=39;break}if(canvas=c[i],this.canvasProgress="3/4 "+this.$t("Canvas Data Acquisition Progress")+" "+(i+1)+"/"+c.length,!canvas.otherContent){t.next=36;break}return t.next=31,this.getData(canvas.otherContent[0]["@id"]);case 31:if(h=t.sent){t.next=34;break}return t.abrupt("continue",36);case 34:for(d=h.resources,m=0;m<d.length;m++){if(y=d[m],I=y.on,Array.isArray(I)&&(I=I[0].full+"#"+I[0].selector.default.value),_=y.resource,C=[],text="",Array.isArray(_))for(x=0;x<_.length;x++)k=_[x],""===(j=w(k.chars))&&(j=k.chars),C.push({label:k["@type"],value:j}),"dctypes:Text"===k["@type"]&&(text=j);else""===(O=w((R=_).chars))&&(O=R.chars),C.push({label:R["@type"],value:O}),text=O;$={"@id":I,"@type":"sc:Canvas",label:text,description:"[Annotation "+o+"]",metadata:C},f.push($),o+=1}case 36:i++,t.next=25;break;case 39:return this.generating=!0,t.next=42,this.update(l,v);case 42:"error"===t.sent||(this.result=!0);case 44:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"getData",value:(f=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get(e).then((function(t){return t.data})).catch((function(){return null}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)})},{key:"create",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(data){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data.a="b",e="https://api.jsonbin.io/v3/b",t.next=4,y.a.post(e,data,{headers:{"Content-Type":"application/json","X-Master-Key":"$2b$10$unmAqqNkGBsCaaOK3d4QEui0i./fZ0INKty90iDOBMHHRoB.ywT.S","X-Bin-Private":"false"}}).then((function(t){return e.replace("/v3","")+"/"+t.data.metadata.id+"/1"})).catch((function(){return null}));case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"update",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e,data){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.put(e.slice(0,-2),JSON.stringify(data),{headers:{"Content-Type":"application/json","X-Master-Key":"$2b$10$unmAqqNkGBsCaaOK3d4QEui0i./fZ0INKty90iDOBMHHRoB.ywT.S","X-Bin-Private":"false"}}).then((function(){return"success"})).catch((function(){return"error"}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(t,n){return e.apply(this,arguments)})},{key:"submit1",value:function(){return"aaa"}}]),d}(d.Vue),x=C=_([Object(d.Component)({layout:"conv",components:{}})],C),k=n(58),j=n(87),R=n.n(j),O=n(397),$=n(402),U=n(400),V=n(407),D=n(399),F=n(185),P=n(118),M=n(44),A=n(99),T=n(408),B=n(426),component=Object(k.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{staticClass:"my-10"},[n("h2",{staticClass:"mb-10"},[t._v(t._s(t.$t("Convert IIIF Manifest to Curation")))]),t._v(" "),n("v-card",{staticClass:"mb-10",attrs:{flat:"",outlined:""}},[n("div",{staticClass:"pa-5"},[n("v-text-field",{attrs:{label:t.$t("Manifest URI"),required:""},model:{value:t.manifest,callback:function(e){t.manifest=e},expression:"manifest"}}),t._v(" "),n("v-btn",{attrs:{color:"primary",href:t.localePath({name:"conv-convert2curation",query:{manifest:t.manifest}})}},[t._v(t._s(t.$t("Submit")))])],1)]),t._v(" "),t.result?t._e():n("div",[t.manifestDownloaded?n("ul",[n("li",[t._v("1/4 "+t._s(t.$t("IIIF Manifest Downloaded.")))]),t._v(" "),t.curationUriGenerated?n("li",[t._v("\n          2/4 "+t._s(t.$t("Generating Curation URI."))+"\n        ")]):t._e(),t._v(" "),t.canvasProgress?n("li",[t._v("\n          "+t._s(t.canvasProgress)+"\n        ")]):t._e(),t._v(" "),t.generating?n("li",[t._v("\n          4/4 "+t._s(t.$t("Generating IIIF Curation List ..."))+"\n        ")]):t._e()]):t._e()]),t._v(" "),t.result?n("div",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[t._v(t._s(t.$t("IIIF Curation List")))]),t._v(" "),n("v-list",[n("v-list-item",{attrs:{href:t.curationUri,target:"_blank"}},[n("v-list-item-icon",[n("img",{attrs:{src:t.baseUrl+"/img/icons/json-ld-data-32.png",width:"30"}})]),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.$t("IIIF Curation List")))])],1)],1)],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[t._v(t._s(t.$t("Viewer")))]),t._v(" "),n("v-list",t._l(t.viewers,(function(e,r){return n("v-list-item",{key:r,attrs:{href:e.url+t.curationUri,target:"_blank"}},[n("v-list-item-icon",[n("img",{attrs:{src:e.icon,width:"30"}})]),t._v("\n                "+t._s(t.$t(e.label))+"\n              ")],1)})),1)],1)],1)],1)],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;R()(component,{VBtn:O.a,VCard:$.a,VCardTitle:U.b,VCol:V.a,VContainer:D.a,VList:F.a,VListItem:P.a,VListItemContent:M.a,VListItemIcon:A.a,VListItemTitle:M.b,VRow:T.a,VTextField:B.a})}}]);