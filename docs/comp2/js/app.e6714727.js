(function(t){function e(e){for(var r,n,l=e[0],i=e[1],c=e[2],m=0,b=[];m<l.length;m++)n=l[m],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&b.push(s[n][0]),s[n]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);u&&u(e);while(b.length)b.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,l=1;l<a.length;l++){var i=a[l];0!==s[i]&&(r=!1)}r&&(o.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},s={app:0},o=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=i;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],n={name:"app"},l=n,i=a("2877"),c=Object(i["a"])(l,s,o,!1,null,null,null),u=c.exports,m=a("5f5b"),b=a("bc3a"),f=a.n(b),d=a("a7fe"),p=a.n(d),h=a("8c4f"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-light"},[a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[a("b-navbar-brand",{attrs:{href:"#"}},[t._v("IIIF Curation Comparison Tool")])],1),a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"my-5"},[a("b-col",{attrs:{sm:"3"}},t._l(t.aggs,(function(e,r){return a("b-card",{key:r,staticClass:"mb-4",attrs:{"no-body":""}},[a("b-card-body",[a("b-card-title",[t._v(t._s(e.label))]),a("b-card-text",[a("b-form-group",[a("b-form-checkbox-group",{attrs:{options:e.options,stacked:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"agg.value"}})],1)],1)],1)],1)})),1),a("b-col",{attrs:{sm:"9"}},[a("b-row",{staticClass:"mb-4"},[a("b-col",{staticClass:"mb-2",attrs:{sm:"12"}},[t._v(t._s((t.currentPage-1)*t.perPage+1)+" - "+t._s(t.currentPage*t.perPage>t.total?t.total:t.currentPage*t.perPage)+" of "+t._s(t.total)+" results")]),a("b-col",{attrs:{sm:"12"}},[a("b-form",{attrs:{inline:""}},[a("label",{staticClass:"mr-sm-2",attrs:{for:"inline-form-custom-select-pref"}},[t._v("Per page:")]),a("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{options:{20:"20",40:"40",100:"100"},id:"inline-form-custom-select-pref"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),a("label",{staticClass:"mr-sm-2",attrs:{for:"inline-form-custom-select-pref"}},[t._v("Sort by:")]),a("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{options:t.sort_options,id:"inline-form-custom-select-pref"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}}),a("b-form-group",[a("b-form-radio-group",{staticClass:"mr-sm-2",attrs:{options:t.d_options,buttons:"","button-variant":"outline-primary"},model:{value:t.grid,callback:function(e){t.grid=e},expression:"grid"}})],1),a("label",{directives:[{name:"show",rawName:"v-show",value:t.grid,expression:"grid"}],staticClass:"mr-sm-2",attrs:{for:"inline-form-custom-select-pref"}},[t._v("Per row:")]),a("b-form-select",{directives:[{name:"show",rawName:"v-show",value:t.grid,expression:"grid"}],staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{options:{12:"12",6:"6",4:"4"},id:"inline-form-custom-select-pref"},model:{value:t.col,callback:function(e){t.col=e},expression:"col"}})],1)],1)],1),a("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[a("b-card-body",[t._l(t.forms,(function(e,r){return a("b-row",{key:r,staticClass:"my-2"},[a("b-col",{attrs:{sm:"4"}},[a("b-form-select",{attrs:{options:t.options},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"form.label"}})],1),a("b-col",{attrs:{sm:"8"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"form.value"}})],1)],1)})),a("b-button",{staticClass:"my-2",on:{click:t.add_form}},[t._v("Add")]),a("br"),a("b-button",{staticClass:"my-2",attrs:{variant:"primary"},on:{click:t.search}},[t._v("Search")])],2)],1),a("div",{staticClass:"text-right mb-4"},[a("b-button",{staticClass:"my-2 mr-2",attrs:{variant:"info"},on:{click:t.compare}},[t._v("Compare")]),a("b-button",{staticClass:"my-2 mr-2",on:{click:t.select_all}},[t._v("Select All")]),a("b-button",{staticClass:"my-2 mr-2",on:{click:t.deselect_all}},[t._v("Unselect All")]),a("b-button",{staticClass:"my-2",attrs:{variant:"info",href:"https://nakamura196.github.io/i3/comp/compare2.html?curation="+t.$route.query.curation,target:"compare"}},[t._v("Compare All")])],1),a("b-pagination",{staticClass:"mb-4",attrs:{"total-rows":t.total,"per-page":t.perPage,"aria-controls":"my-table",align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),a("b-row",{directives:[{name:"show",rawName:"v-show",value:t.grid,expression:"grid"}]},t._l(t.data.slice((t.currentPage-1)*t.perPage,t.currentPage*t.perPage),(function(e,r){return a("b-col",{key:r,attrs:{sm:12/t.col}},[a("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[a("b-link",{staticStyle:{"background-color":"black"},attrs:{href:e._url,target:"_blank"}},[a("b-img-lazy",{staticStyle:{display:"flex",margin:"auto","max-height":"150px","max-width":"100%"},attrs:{src:e._thumbnail?e._thumbnail:t.get_thumb(r),alt:"Image 1"}})],1),a("b-card-body",[a("b-link",{attrs:{href:e._url,target:"_blank"}},[a("b-card-title",[t._v(t._s(e._label))])],1),a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e._checked,callback:function(a){t.$set(e,"_checked",a)},expression:"value._checked"}})],1)],1)],1)})),1),t._l(t.data.slice((t.currentPage-1)*t.perPage,t.currentPage*t.perPage),(function(e,r){return a("b-card",{directives:[{name:"show",rawName:"v-show",value:!t.grid,expression:"!grid"}],key:r,staticClass:"mb-4",attrs:{"no-body":""}},[a("b-card-body",[a("b-row",[a("b-col",{attrs:{sm:"3"}},[a("b-link",{attrs:{href:e._url,target:"_blank"}},[a("b-img-lazy",{staticStyle:{"max-height":"150px","max-width":"100%"},attrs:{src:e._thumbnail?e._thumbnail:t.get_thumb(r),alt:"Image 1"}})],1)],1),a("b-col",{attrs:{sm:"9"}},[a("b-link",{attrs:{href:e._url,target:"_blank"}},[a("b-card-title",[t._v(t._s(e._label))])],1),a("b-card-text",[t._v(t._s(e.metadata))]),a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e._checked,callback:function(a){t.$set(e,"_checked",a)},expression:"value._checked"}})],1)],1)],1)],1)})),a("b-pagination",{staticClass:"my-5",attrs:{"total-rows":t.total,"per-page":t.perPage,"aria-controls":"my-table",align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],2)],1)],1)],1)},g=[],_=(a("386d"),a("a481"),a("ac6a"),a("456d"),a("55dd"),a("28a5"),{name:"HelloWorld",data:function(){return{query:"",all:[],data:[],currentPage:1,perPage:40,access_info:"",grid:!0,col:6,sort:"_score_desc",forms:[{}],options:[],total:0,aggs:[],d_options:[{text:"Grid",value:!0},{text:"List",value:!1}],new2:{},sort_options:[],mani_arr:{}}},methods:{search:function(){var t=this;this.update_param();for(var e={},a=0;a<this.forms.length;a++){var r=this.forms[a],s=r.label,o=r.value;""!=o&&null!=o&&(e[s]=[o])}for(a=0;a<this.aggs.length;a++){var n=this.aggs[a];n.value&&n.value.length>0&&(e[n.label]=n.value)}console.log(e);var l=this.sort.split("_"),i=l[0],c=l[1],u=this.new2[i];"asc"==c?u.sort((function(t,e){return e.key<t.key?1:e.key>t.key?-1:0})):u.sort((function(t,e){return e.key>t.key?1:e.key<t.key?-1:0}));for(var m=[],b=0;b<u.length;b++)for(var f=u[b].value,d=0;d<f.length;d++){var p=f[d];-1==m.indexOf(p)&&m.push(p)}this.data=[],this.aggs=[];var h={};for(a=0;a<m.length;a++){var v=m[a],g=this.all[v],_=g.metadata,y=!0;for(var k in e){var w=e[k];if(_[k]){if(w.length>0){for(var x=!1,P=0;P<w.length;P++)-1!=_[k].indexOf(w[P])&&(x=!0);x||(y=!1)}}else y=!1}if(y)for(var C in this.data.push(g),_){var j=_[C];h[C]||(h[C]={});var O=h[C];O[j]||(O[j]=0),O[j]+=1}}var S=function(a){var r=[],s=h[a],o=Object.keys(s).map((function(t){return{key:t,value:s[t]}}));o.sort((function(t,e){return t.value<e.value?1:t.value>e.value?-1:0}));for(var n=0;n<o.length;n++){var l=o[n],i={text:l.key+" ("+l.value+")",value:l.key};r.push(i)}var c={label:a,options:r,value:[]};e[a]&&(c.value=e[a]),t.aggs.push(c)};for(var $ in h)S($);this.total=this.data.length},update_param:function(){},add_form:function(){this.forms.push({value:""})},compare:function(){for(var t=[],e=0;e<this.data.length;e++){var a=this.data[e];a._checked&&t.push(a._manifest+"#"+a._id)}var r="https://nakamura196.github.io/i3/comp/compare.html?param="+encodeURIComponent(t.join(";"));window.open(r,"compare")},select_all:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e._checked=!0}},deselect_all:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e._checked=!1}},get_thumb:function(t){var e=this,a=this.data[t],r=a._manifest;if(this.mani_arr[r])return a._thumbnail=this.c_thumb(a),a._thumbnail;f.a.get(r).then((function(t){var s=t.data,o={};e.mani_arr[r]=o;for(var n=s["sequences"][0]["canvases"],l=0;l<n.length;l++){var i=n[l];i["images"][0]["resource"]["service"]?o[i["@id"]]=i["images"][0]["resource"]["service"]["@id"]+"/info.json":o[i["@id"]]=i["images"][0]["resource"]["@id"]}return a._thumbnail=e.c_thumb(a),a._thumbnail}))},c_thumb:function(t){var e=t._id.split("#xywh="),a=e[0],r=e[1],s=this.mani_arr[t._manifest][a];return-1!=s.indexOf("info.json")&&(s=s.replace("info.json",r+"/200,/0/default.jpg")),s}},created:function(){var t=this,e=this.$route.query.curation;f.a.get(e).then((function(a){for(var r=[],s=a.data.selections,o=1,n=[],l={},i=0;i<s.length;i++)for(var c=s[i],u=c.members,m=0;m<u.length;m++){var b=u[m],f={_label:b.label,_url:"http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?curation="+e+"&pos="+o,_checked:!1,_id:b["@id"],_manifest:c.within["@id"],metadata:{}};if(o+=1,b["metadata"])for(var d=b["metadata"],p=0;p<d.length;p++){var h=d[p],v=h.label,g=h.value;f.metadata[v]=g,-1==n.indexOf(v)&&n.push(v),l[v]||(l[v]={});var _=l[v];_[g]||(_[g]=[]),_[g].push(r.length)}b["thumbnail"]&&(f["_thumbnail"]=b["thumbnail"]),r.push(f)}t.all=r;for(i=0;i<n.length;i++){var y=n[i];t.options.push({value:y,text:y}),t.sort_options.push({value:y+"_asc",text:y+" Asc"}),0==i&&(t.sort=y+"_asc"),t.sort_options.push({value:y+"_desc",text:y+" Desc"})}var k={};for(var w in l){var x=l[w];for(var P in k[w]=[],x)k[w].push({key:P,value:x[P]})}t.new2=k,t.search()}));var a=this.$route.query;this.query=a.query?a.query:"",this.currentPage=a.currentPage?a.currentPage:1,this.perPage=a.perPagePage?a.cperPagePage:40,this.access_info=a.access_info?a.access_info:"",this.col=a.col?a.col:6,this.grid="false"!=a.grid},watch:{}}),y=_,k=Object(i["a"])(y,v,g,!1,null,null,null),w=k.exports;r["default"].use(h["a"]);var x=new h["a"]({routes:[{path:"/",name:"home",component:w}]});a("f9e3"),a("2dd8");r["default"].use(m["a"],f.a,p.a),r["default"].config.productionTip=!1,new r["default"]({router:x,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.e6714727.js.map